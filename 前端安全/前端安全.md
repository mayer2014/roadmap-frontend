CSRF: 跨站请求伪造
CSRF 可以简单理解为：攻击者盗用了你的身份，以你的名义发送恶意请求，容易造成个人隐私泄露以及财产安全。

就是：
1. 登录受信任网站，并在本地生成 cookie
2. 在不登出 A 的情况下，访问危险网站 B
比如用户使用浏览器登陆银行网站A，浏览器会获取token等信息
危险网站B利用一张图片，或一个表单伪造，背地里code是向银行网站发送转账请求，
此时用户点击图片就会发送转账危险

可以看出，CSRF 攻击时源于 WEB 的隐式身份验证机制！WEB 的身份验证机制虽然可以保证一个请求是来自某个用户的浏览器，但无法保证该请求是经过用户批准发送的。

解决：
（1）
1. 使用POST请求
2. 使用验证码
CSRF 攻击的过程，往往是在用户不知情的情况下发生的，在用户不知情的情况下构造网络请求，所以如果使用验证码，那么每次操作都需要用户进行互动，从而简单有效地防御了 CSRF 的攻击
（2）
使用Token：目前主流的做法是使用 Token 防御 CSRF 攻击

CSRF 攻击要成功的条件在于攻击者能够准确地预测所有的参数从而构造出合法的请求，所以根据不可预测性原则，我们可以对参数进行加密从而防止 CSRF 攻击，可以保存其原有参数不变，另外添加一个参数 Token，其值是随机的，这样攻击者因为不知道 Token 而无法构造出合法的请求进行攻击，所以我们在构造请求时候只需要保证：

Token 要足够随机，使攻击者无法准确预测
Token 是一次性的，即每次请求成功后要更新 Token，增加预测难度
Token 要主要保密性，敏感操作使用 POST，防止 Token 出现在 URL 中

=============================================================================================================================

XSS 攻击：跨站脚本攻击
其原理是攻击者向有 XSS 漏洞的网站中输入恶意的 HTML 代码，当其它用户浏览该网站时候，该段 HTML 代码会自动执行，从而达到攻击的目的，如盗取用户的 Cookie，破坏页面结构，重定向到其它网站等。
比如：
某论坛的评论功能没有对 XSS 进行过滤，那么我们可以对其进行评论，评论内容：
<script>
while(true) {
    alert('你关不掉我');
}
</script>
在发布评论中含有 JS 的内容文本，这时候如果服务器没有过滤或转义掉这些脚本，作为内容发布到页面上，其他用户访问这个页面的时候就会运行这段脚本。

防御 XSS 攻击：
理论上，网站上所有可输入的地方没有对输入内容进行处理的话，都会存在 XSS 漏洞，漏洞的危险取决于攻击代码的威力，攻击代码也不局限于 script，防御 XSS 攻击最简单直接的方法就是过滤用户的输入。

1. 如果不需要用户输入 HTML，可以直接对用户的输入进行 HTML 转义
<script>
window.location.href="http://www.xss.com";
</script>
经过转义后就成了：
&lt;script&gt;window.location.href=&quot;http://www.baidu.com&quot;&lt;/script&gt;
它现在会像普通文本一样显示出来，变得无毒无害，不能执行了。

2.当允许用户需要输入 HTML 代码时：
将用户的输入使用 HTML 解析库进行解析，获取其中的数据。然后根据用户原有的标签属性，重新构建 HTML 元素树。构建的过程中，所有的标签、属性都只从白名单中拿取


=============================================================================================================================


SQL 注入：
利用现有应用程序，将(恶意) 的 SQL 命令注入到后台数据库引擎执行的能力，它可以通过在 Web 表单中输入 (恶意) SQL 语句得到一个存在安全漏洞的网站上的数据库，而不是按照设计者意图去执行 SQL 语句。

防御：
SQL 防护：
1. 永远不要信任用户的输入: 对用户的输入进行校验，可以通过正则表达式，或限制长度；对单引号和双"-"进行转换等。
2. 永远不要使用动态拼装 SQL，可以使用参数化的 SQL 或者直接使用存储过程进行数据查询存取。
3. 永远不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接。
4. 不要把机密信息直接存放，加密或者 hash 掉密码和敏感的信息。


